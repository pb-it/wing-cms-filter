var jPath=function(){"use strict";function e(e,r){return r.startsWith("!")?!e.includes(parseInt(r.substring(1))):e.includes(parseInt(r))}const r=function(r,n){var t;if(n.indexOf(",")>=0){t=n.split(",").some((n=>e(r,n)))}else{var i,s=n.indexOf("("),a=n.lastIndexOf(")"),f=s>=0&&a>0;i=f?n.substring(s+1,a):n,t=function(r,n){var t;if(n.indexOf("&&")>=0){t=n.split("&&").every((n=>e(r,n)))}else if(n.indexOf("||")>=0){t=n.split("||").some((n=>e(r,n)))}else t=e(r,n);return t}(r,i),f&&n.startsWith("!")&&(t=!t)}return t};function n(e,r){for(var s,a,f=0,l=!1,c=!1,o=!1,u=!1,h=!1,g=-1,b=-1,v=0;v<r.length;v++){switch(r[v]){case"(":f++,-1==g&&(c=!0,g=v,v>0&&"!"==r[v-1]&&(l=!0));break;case")":if(!(f>0))throw new Error("invalid expression");f--;break;case".":-1==g&&v>0&&"@"==r[v-1]&&(o=!0,g=v-1,v>1&&"!"==r[v-2]&&(l=!0));break;case"&":if(0==f&&v>0&&"&"==r[v-1]){if(!(g>=0))throw new Error("invalid expression");u=!0,b=v-1}break;case"|":if(0==f&&v>0&&"|"==r[v-1]){if(!(g>=0))throw new Error("invalid expression");h=!0,b=v-1}}if(b>=0)break}if(0!=f)throw new Error("invalid expression");if(g>=0?(-1==b&&(b=r.length),o?a=r.substring(g,b):c&&(a=r.substring(g+1,b-1))):a=r,o)s=function(e,r){var n=[];if(!r.startsWith("@."))throw"invalid predicate";var s,a,f;if((r=r.substring(2)).indexOf("==")>=0)s="==";else if(r.indexOf("!=")>=0)s="!=";else if(r.indexOf("=~")>=0)s="=~";else if(r.indexOf(">=")>=0)s=">=";else if(r.indexOf("<=")>=0)s="<=";else{if(r.indexOf("=")>=0)throw new Error("invalid operator");r.indexOf(">")>=0?s=">":r.indexOf("<")>=0&&(s="<")}if(null==s)a=i(r);else{var l=r.split(s);null!=l&&2==l.length&&(a=i(l[0]),f=l[1])}if(null!=a)for(var c,o=0;o<e.length;o++)t(c=e[o],a,s,f)&&n.push(c);return n}(e,a);else{if(!c)throw new Error("invalid expression");s=n(e,a)}return l&&(s=e.filter((e=>!s.includes(e)))),u?s=n(s,r.substring(b+2)):h&&(s=[...new Set([...s,...n(e,r.substring(b+2))])]),s}function t(e,n,i,s){var f=!1;if(e){var l=n[0],c=e[l.name];if(c)if(1==n.length)l.type==a.object&&(f=function(e,r,n){var t=!1;if(null!=r)if(null!=e)switch(r){case"==":case"!=":var i,s=new RegExp(',(?=(?:[^"]*"[^"]*")*[^"]*$)'),a=n.split(s);for(var f in a)(i=a[f]).startsWith('"')&&i.endsWith('"')&&(a[f]=i.substring(1,i.length-1));var l=a.includes(e.toString());t="=="==r?l:!l;break;case"=~":var c,o=n;if(o.startsWith("'")&&o.endsWith("'")&&(o=o.substring(1,o.length-1)),o.startsWith('"')&&o.endsWith('"')&&(o=o.substring(1,o.length-1)),o.startsWith("/")){var u=o.lastIndexOf("/");0!=u&&(c=o.substring(u+1),o=o.substring(1,u))}t=new RegExp(o,c).test(e);break;case">=":t=e>=n;break;case"<=":t=e<=n;break;case">":t=e>n;break;case"<":t=e<n}else"!="==r&&(t=!0);else t=null!=e;return t}(c,i,s));else{var o=n.slice(1);if(l.type==a.object)f=t(c,o,i,s);else if(l.type==a.array)if(2==n.length){var u=n[1].name;if("length()"==u){var h=c.length;switch(i){case"==":f=h==s;break;case"!=":f=h!=s;break;case"~=":break;case">=":f=h>=s;break;case"<=":f=h<=s;break;case">":f=h>s;break;case"<":f=h<s}}else if("=="==i||"!="==i){var g=r(Array.from(c,(e=>e[u])),s);"=="==i?f=g:"!="==i&&(f=!g)}}else for(var b=c,v=0;v<b.length&&!(f=t(b[v],o,i,s));v++);}else"!="==i&&(f=!0)}else"!="==i&&(f=!0);return f}function i(e){for(var r=[],n=e.split("."),t=0;t<n.length;t++)r.push(s(n[t]));return r}function s(e){return e.endsWith("[*]")?new f(e.substring(0,e.length-3),a.array):new f(e,a.object)}const a=Object.freeze({number:1,string:2,object:3,array:4});class f{constructor(e,r){this.name=e,this.type=r}}return function(e,r){return function(e,r){r=function(e){var r=e.split('"');if(r.length%2==1)for(var n=0;n<r.length;n+=2)r[n]=r[n].replace(/\s/g,"");return r.join('"')}(r),r.startsWith("$.");r=function(e){var r,n=e.indexOf("["),t=e.lastIndexOf("]");if(!(n>=0&&t>0))throw new Error("incorrect clasping");r=e.substring(n+1,t);return r}(r),r.startsWith("?");return r=function(e){var r,n=e.indexOf("("),t=e.lastIndexOf(")");if(!(n>=0&&t>0))throw new Error("incorrect clasping");r=e.substring(n+1,t);return r}(r),n(e,r)}(e,r)}}();
